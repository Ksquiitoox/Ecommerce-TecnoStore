// register.js
document.addEventListener("DOMContentLoaded", () => {
  const form = document.getElementById("RegisterForm");
  if (!form) return;
  form.addEventListener("submit", (e) => {
    e.preventDefault();
    const nombre = document.getElementById("nombre").value.trim();
    const apellido = document.getElementById("apellido").value.trim();
    const email = document.getElementById("email").value.trim().toLowerCase();
    const password = document.getElementById("password").value.trim();
    const fecha = document.getElementById("fecha").value;
    if (!nombre || !apellido || !email || !password || !fecha) {
      alert("Por favor, completá todos los campos.");
      return;
    }
    if (password.length < 6) {
      alert("La contraseña debe tener al menos 6 caracteres.");
      return;
    }
    //Usuarios existentes
    const usuarios = JSON.parse(localStorage.getItem("usuarios")) || [];
    // Verificar si ya existe email
    const existe = usuarios.some(u => u.email === email);
    if (existe) {
      alert("Ya existe un usuario registrado con ese correo electrónico.");
      return;
    }
    // Crear nuevo usuario
    const nuevoUsuario = {
      nombre,
      apellido,
      email,                // ya está en minúsculas
      password,
      fechaNacimiento: fecha
    };

    usuarios.push(nuevoUsuario);
    localStorage.setItem("usuarios", JSON.stringify(usuarios));

    alert("Registro exitoso. Ahora podés iniciar sesión.");
    window.location.href = "Login.html";
  });
});